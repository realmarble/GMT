<template>
  <div
    class="container template"
    id="conditiongen-template"
    data-tab="conditiongen">
    <button type="button" onclick="travelconditionroll();">
      Losuj Travel Condition
    </button>
    <div id="conditiongenwynik"></div>
    <script>
      var wynikdiv = document.getElementById("conditiongenwynik");
      function getRandomInt(max) {
        return Math.floor(Math.random() * max);
      }
      function random_item(items) {
        return items[Math.floor(Math.random() * items.length)];
      }
      function travelconditionroll() {
        resultarray = [];
        function evaluate(modyfikator) {
          if (modyfikator == 1) {
            resultarray.push(-1);
            while (getRandomInt(10) < 6) {
              resultarray.push(1);
            }
          } else if (modyfikator == 10) {
            resultarray.push(1);
            while (getRandomInt(10) > 5) {
              resultarray.push(1);
            }
          } else if (modyfikator > 5) {
            resultarray.push(1);
          } else {
            resultarray.push(-1);
          }
        }

        var modyfikator1 = getRandomInt(10);
        var modyfikator2 = getRandomInt(10);
        var modyfikator3 = getRandomInt(10);
        var modyfikator4 = getRandomInt(10);
        evaluate(modyfikator1);
        evaluate(modyfikator2);
        evaluate(modyfikator3);
        evaluate(modyfikator4);
        const reducer = (accumulator, curr) => accumulator + curr;

        var result = resultarray.reduce(reducer);

        if (result == 0) {
          var event = random_item([
            "głód",
            "zaraza",
            "wojna",
            "blokada",
            "szaleństwo",
            "przeklęta wiedza",
            "przeklęty krąg magiczny",
            "zmęczenie",
            "śmierć",
            "bogactwo",
            "odpoczynek",
            "jedzenie",
            "pomoc",
            "skrót",
            "wiedza",
            "pobojowisko",
            "odnowa",
            "krąg magii",
            "antyk",
          ]);
          wynikdiv.innerHTML = "Wydarzenie:" + event + ", Poziom:" + result;
        } else if (result > 0) {
          var event = random_item([
            "bogactwo",
            "odpoczynek",
            "jedzenie",
            "pomoc",
            "skrót",
            "wiedza",
            "pobojowisko",
            "odnowa",
            "krąg magii",
            "antyk",
          ]);
          wynikdiv.innerHTML = "Wydarzenie:" + event + ", Poziom:" + result;
        } else {
          var event = random_item([
            "głód",
            "zaraza",
            "wojna",
            "blokada",
            "szaleństwo",
            "przeklęta wiedza",
            "przeklęty krąg magiczny",
            "zmęczenie",
            "antyk",
            "śmierć",
          ]);
          wynikdiv.innerHTML = "Wydarzenie:" + event + ", Poziom:" + result;
        }
      }
    </script>
  </div>
</template>
